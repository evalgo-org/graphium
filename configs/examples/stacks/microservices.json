{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "microservices-app",
  "description": "Microservices architecture with multiple services and Redis cache",
  "network": {
    "name": "microservices-network",
    "driver": "bridge",
    "createIfNotExists": true
  },
  "itemListElement": [
    {
      "@type": "SoftwareApplication",
      "position": 1,
      "name": "api-gateway",
      "image": "kong:latest",
      "ports": [
        {
          "containerPort": 8000,
          "hostPort": 8000,
          "protocol": "tcp"
        },
        {
          "containerPort": 8001,
          "hostPort": 8001,
          "protocol": "tcp"
        }
      ],
      "environment": {
        "KONG_DATABASE": "off",
        "KONG_PROXY_ACCESS_LOG": "/dev/stdout",
        "KONG_ADMIN_ACCESS_LOG": "/dev/stdout",
        "KONG_PROXY_ERROR_LOG": "/dev/stderr",
        "KONG_ADMIN_ERROR_LOG": "/dev/stderr"
      }
    },
    {
      "@type": "SoftwareApplication",
      "position": 2,
      "name": "user-service",
      "image": "myapp/user-service:latest",
      "ports": [
        {
          "containerPort": 3001,
          "hostPort": 3001,
          "protocol": "tcp"
        }
      ],
      "environment": {
        "SERVICE_PORT": "3001",
        "DATABASE_HOST": "",
        "DATABASE_PORT": "5432",
        "REDIS_HOST": "",
        "REDIS_PORT": "6379"
      },
      "healthCheck": {
        "type": "http",
        "path": "/health",
        "port": 3001
      }
    },
    {
      "@type": "SoftwareApplication",
      "position": 3,
      "name": "product-service",
      "image": "myapp/product-service:latest",
      "ports": [
        {
          "containerPort": 3002,
          "hostPort": 3002,
          "protocol": "tcp"
        }
      ],
      "environment": {
        "SERVICE_PORT": "3002",
        "DATABASE_HOST": "",
        "DATABASE_PORT": "5432",
        "REDIS_HOST": "",
        "REDIS_PORT": "6379"
      },
      "healthCheck": {
        "type": "http",
        "path": "/health",
        "port": 3002
      }
    },
    {
      "@type": "SoftwareApplication",
      "position": 4,
      "name": "order-service",
      "image": "myapp/order-service:latest",
      "ports": [
        {
          "containerPort": 3003,
          "hostPort": 3003,
          "protocol": "tcp"
        }
      ],
      "environment": {
        "SERVICE_PORT": "3003",
        "DATABASE_HOST": "",
        "DATABASE_PORT": "5432",
        "REDIS_HOST": "",
        "REDIS_PORT": "6379"
      },
      "healthCheck": {
        "type": "http",
        "path": "/health",
        "port": 3003
      }
    },
    {
      "@type": "SoftwareApplication",
      "position": 5,
      "name": "postgres",
      "image": "postgres:14",
      "ports": [
        {
          "containerPort": 5432,
          "hostPort": 5432,
          "protocol": "tcp"
        }
      ],
      "environment": {
        "POSTGRES_DB": "microservices",
        "POSTGRES_USER": "microservices",
        "POSTGRES_PASSWORD": "microservices-secret"
      },
      "volumeMounts": [
        {
          "source": "microservices-postgres-data",
          "target": "/var/lib/postgresql/data",
          "type": "volume"
        }
      ],
      "healthCheck": {
        "type": "command",
        "command": ["pg_isready", "-U", "microservices"]
      }
    },
    {
      "@type": "SoftwareApplication",
      "position": 6,
      "name": "redis",
      "image": "redis:7-alpine",
      "ports": [
        {
          "containerPort": 6379,
          "hostPort": 6379,
          "protocol": "tcp"
        }
      ],
      "healthCheck": {
        "type": "command",
        "command": ["redis-cli", "ping"]
      }
    }
  ]
}
